# 回文子串

记$f_{i,j}$表示$\{a_1,a_2,\dots,a_n\}$构成的子串从$a_i$开始到$a_j$结束（两端闭区间），构成的子串是否回文，则

$$
f_{i,j} = \begin{cases}
(a_{i} = a_j) ∧ f_{i+1, j -1}, &j - i \geq 2  \\
a_i = a_j, &j - i = 1 \\
1, &j - i = 0
\end{cases}.
$$

注意，在$f_{i,j}$中，我们不使用$i > j$的部分。

由于这是典型的区间DP，所以需要先枚举区间长度$len$，然后枚举起始点$i$，然后获取终止点$j = i + len - 1$。时间复杂度为$O(n^2)$。

## 最长回文子串

如果要求出原字符串$a_{1:n}$的最长回文子串，只需要求出

$$
\{a_{i,j} | f_{i,j} = 1 \wedge \forall f_{i',j'} = 1, j - i \geq j' - i' \}
$$

即可。时间复杂度为$O(n^2)$。

## 拓展：所有回文子串

如果要求出原字符串 $a_{1:n}$ 所包含的回文子串的个数，只需要计算

$$
\sum_{1 \leq i \leq j \leq n} f_{i,j}
$$

即可。时间复杂度$O(n^2)$。

## 拓展：所有伪回文子串

> 鹰角网络 2025 秋招笔试真题

伪回文子串是指从中间分出来的两个字符子集相同的字符串。例如 `bcbc`、`abcab` 都是伪回文子串。当然，所有的回文子串都是伪回文子串。

设计一个算法，在 $O(n^2)$ 时间复杂度内求出字符数组 $a_{1:n}$ 所包含的伪回文子串的个数。

可以确定的是，这道题不能用 DP 解决，需要考虑其他思路。
