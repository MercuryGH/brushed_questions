# 格雷码的生成

给定正整数$n$，请生成一个长度为$2^n$的$n$位格雷码序列。在若干个合法的格雷码序列中，只需给出任意一个即可。

例如，$n=2$的一个答案为

$$
\{00, 01, 11, 10\}.
$$

$n =3$的一个答案为

$$
\{000, 001, 011, 010, 110, 111,101, 100\}.
$$

## 解答

### 递推生成

记$n$位格雷码的一个合法序列为$G_n = \{g_1, \dots, g_n\}$，则$G_{n+1}$可由如下方式生成：

1. $G'_n = "0" + G_n$，
2. $H'_n = "1" + G^T_n$，
3. $G_{n+1} = G'_n \cup H'_n$。

其中$G^T_n = \{g_n, \dots, g_1\}$。

下面用归纳法证明这个生成方式生成的确实是格雷码。

* $G'_n$里面的都是格雷码。这是因为$G_n$都是格雷码，且最高位$0$是相同的；
* $H'_n$里面的都是格雷码。这是因为$G_n$也都是格雷码，且最高位$1$是相同的；
* $G'_n$与$H'_1$的汉明距离为$1$。这是因为$G_n = G_1^T = g_n$，且只有最高位不相同。
* （容易证明，不重复不漏解）。

时间复杂度满足$T(n) = 2 \cdot T(n / 2)$，$T(1) = O(1)$。

### 由二进制序列异或得到

设$n$位二进制数组成的有序序列为$b_n = \{b_1, \dots, b_n\}$，$b_i$对应的格雷码为$g_i$，转换规则如下：

$$
g_i = b_{i} \oplus  b_{i+1} ,
$$

其中$\oplus$是按位异或运算。

为什么这样是对的？需要严格的数学证明，此处略。
