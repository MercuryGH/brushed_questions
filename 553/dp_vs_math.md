# 最优除法

给定一个正整数序列$\{a_1,\dots,a_n\}$，记除法表达式未添加括号的样子为

$$
a_1 \div a_2 \div \dots \div a_n
$$

你需要为以上的表达式添加括号，使得表达式的结果尽可能大。你需要将添加括号得到的结果字符串进行输出。

## 动态规划解

考虑区间DP。记$f_{i,j},g_{i,j}$分别表示从$a_i$开始，到$a_j$结束，通过添加括号可得到的最大结果和最小结果。

由于我们需要输出答案，所以记$s_{i,j},t_{i,j}$分别为$f_{i,j},g_{i,j}$对应的结果字符串。

考虑状态转移。我们通过枚举$k \in [i, j)$，可以将区间$[i,j]$分为$[i,k], [k+1,j]$两部分，那么$f_{i,j}$就是左半部分的最大值除以右半部分的最小值；$g_{i,j}$就是左半部分的最小值除以右半部分的最大值。于是$\forall i < j$，都有

$$
f_{i,j} = \max_{k \in [i,j)} \frac{f_{i,k}}{g_{k+1,j}}, \\
g_{i,j} = \min_{k \in [i,j)} \frac{g_{i,k}}{f_{k+1,j}}, \\
$$

初值条件为$f_{i,i}=g_{i,i}=a_i$。

## 数学贪心解

想到状态转移方程的时候，我们容易发现，对于原始序列所进行的**最后一次除法**，我们只需要最大化分子，最小化分母，就能得到最大的解了。由于**序列的所有元素均为正整数（重要贪心条件）**，不难发现

* 分子的最大值就是$a_1$（其他的分子都是$a_1 \div a_2 \div \dots$的形式，必然不大于$a_1$）。
* 分母的最小值就是$(a_2\div\dots\div a_n)$。

于是，最大的表达式的结果就是$a_1 \div (a_2 \div \dots \div a_n)$。时间复杂度仅为$O(n)$。
