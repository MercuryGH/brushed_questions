# 滑动窗口最大值

给你一个整数数组$a_n$，有一个大小为$k$的滑动窗口从数组的最左侧移动到数组的最右侧。你只可以看到在滑动窗口内的$k$个数字。滑动窗口每次只向右移动一位。

返回滑动窗口中的最大值序列$b_{n-k + 1}$。

## 解答

### 暴力

每次都线性扫描滑动窗口。时间复杂度$O(nk)$。

### 查找优化

使用堆或者自平衡搜索树，时间复杂度$O(n\log k)$。

### 单调双端队列

维护一个单调递减双端队列。

对每个滑动窗口的新元素，操作规则如下：

1. 如果新元素比队列尾元素小（或者队列为空），则入队；
2. 否则，从队列尾部弹出元素，直到新元素比队列尾元素小（或者队列为空），入队。

对每个滑动窗口的即将被废弃（滑走）的元素，操作规则如下：

1. 如果即将被废弃的元素恰好与队列头元素相等，则从队列头部弹出**一个**元素；
2. 否则，什么也不做（因为这个即将被废弃的元素，在之前加入新元素的过程中一定已经被弹走了）。

容易证明，对该单调（递减）双端队列，其满足如下性质：

1. 队列内的元素从头到尾始终递减。
2. 当有元素入队时，那些再也没有机会成为滑动窗口最大值的元素（除了队首元素）一定会被弹走。
3. 之前队列中的最大元素会在考虑即将被废弃（滑走）的元素时，被弹走。

使用单调队列，每个滑动窗口最大值的判断过程的时间复杂度可以降低为$O(1)$，因此整体时间复杂度降低为$O(n)$。
